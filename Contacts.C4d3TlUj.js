import{u as g,b as y,j as t,c as L,d as O,e as W,r as A,f as D}from"./index.BFo7raQu.js";import{F as q,c as P,a as V,b as w,E as R,d as k}from"./index.esm.B5_XHk4Q.js";function K(e,n=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(n)}function U(e,n=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(n)}function B(e,n="expected all items to be functions, instead received the following types: "){if(!e.every(s=>typeof s=="function")){const s=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${n}[${s}]`)}}var N=e=>Array.isArray(e)?e:[e];function G(e){const n=Array.isArray(e[0])?e[0]:e;return B(n,"createSelector expects all input-selectors to be functions, but received the following types: "),n}function H(e,n){const s=[],{length:r}=e;for(let c=0;c<r;c++)s.push(e[c].apply(null,n));return s}var J=class{constructor(e){this.value=e}deref(){return this.value}},Q=typeof WeakRef<"u"?WeakRef:J,X=0,E=1;function j(){return{s:X,v:void 0,o:null,p:null}}function F(e,n={}){let s=j();const{resultEqualityCheck:r}=n;let c,i=0;function a(){var h;let o=s;const{length:x}=arguments;for(let p=0,b=x;p<b;p++){const f=arguments[p];if(typeof f=="function"||typeof f=="object"&&f!==null){let d=o.o;d===null&&(o.o=d=new WeakMap);const m=d.get(f);m===void 0?(o=j(),d.set(f,o)):o=m}else{let d=o.p;d===null&&(o.p=d=new Map);const m=d.get(f);m===void 0?(o=j(),d.set(f,o)):o=m}}const u=o;let l;if(o.s===E)l=o.v;else if(l=e.apply(null,arguments),i++,r){const p=((h=c==null?void 0:c.deref)==null?void 0:h.call(c))??c;p!=null&&r(p,l)&&(l=p,i!==0&&i--),c=typeof l=="object"&&l!==null||typeof l=="function"?new Q(l):l}return u.s=E,u.v=l,l}return a.clearCache=()=>{s=j(),a.resetResultsCount()},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0},a}function Y(e,...n){const s=typeof e=="function"?{memoize:e,memoizeOptions:n}:e,r=(...c)=>{let i=0,a=0,o,x={},u=c.pop();typeof u=="object"&&(x=u,u=c.pop()),K(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const l={...s,...x},{memoize:h,memoizeOptions:p=[],argsMemoize:b=F,argsMemoizeOptions:f=[]}=l,d=N(p),m=N(f),v=G(c),C=h(function(){return i++,u.apply(null,arguments)},...d),$=b(function(){a++;const I=H(v,arguments);return o=C.apply(null,I),o},...m);return Object.assign($,{resultFunc:u,memoizedResultFunc:C,dependencies:v,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:b})};return Object.assign(r,{withTypes:()=>r}),r}var S=Y(F),Z=Object.assign((e,n=S)=>{U(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const s=Object.keys(e),r=s.map(i=>e[i]);return n(r,(...i)=>i.reduce((a,o,x)=>(a[s[x]]=o,a),{}))},{withTypes:()=>Z});const T=e=>e.filters.name,M=e=>e.contacts.items,_=e=>e.contacts.isLoading,ee=e=>e.contacts.error,te=S([M,T],(e,n)=>e.filter(s=>s.name.toLowerCase().includes(n.toLowerCase()))),ne=P({name:k().min(3,"Name must be at least 3 characters").max(50,"Name must be less than 50 characters").required("Name is required"),number:k().min(3,"Number must be at least 3 characters").max(50,"Number must be less than 50 characters").required("Number is required")});function se(){const e=g(),n=y(M),s=(r,{resetForm:c})=>{if(n.find(a=>a.name.toLowerCase()===r.name.toLowerCase())){alert(`${r.name} is already in contacts.`);return}e(L(r)),c()};return t.jsx(q,{initialValues:{name:"",number:""},validationSchema:ne,onSubmit:s,children:t.jsxs(V,{style:{border:"1px solid black",padding:"20px",width:"fit-content"},children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",children:"Name"}),t.jsx("br",{}),t.jsx(w,{type:"text",id:"name",name:"name",style:{width:"250px",padding:"5px",border:"1px solid black"}}),t.jsx(R,{name:"name",component:"div"})]}),t.jsxs("div",{style:{marginTop:"15px"},children:[t.jsx("label",{htmlFor:"number",children:"Number"}),t.jsx("br",{}),t.jsx(w,{type:"tel",id:"number",name:"number",style:{width:"250px",padding:"5px",border:"1px solid black"}}),t.jsx(R,{name:"number",component:"div"})]}),t.jsx("button",{type:"submit",style:{marginTop:"15px",padding:"5px 15px",backgroundColor:"#f0f0f0",border:"1px solid black"},children:"Add contact"})]})})}function re({contact:e}){const n=g();return t.jsxs("div",{style:{border:"1px solid #ccc",borderRadius:"4px",padding:"10px",width:"400px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("div",{children:t.jsxs("span",{children:["ðŸ‘¤ ",e.name]})}),t.jsx("div",{children:t.jsxs("span",{children:["ðŸ“ž ",e.number]})})]}),t.jsx("button",{onClick:()=>n(O(e.id)),style:{padding:"5px 15px",backgroundColor:"#f0f0f0",color:"black",border:"1px solid #ccc",borderRadius:"4px",height:"fit-content"},children:"Delete"})]})}function oe(){const e=y(te),n=y(_),s=y(ee);return n?t.jsx("div",{children:"Loading contacts..."}):s?t.jsxs("div",{children:["Error: ",s]}):t.jsx("div",{style:{display:"flex",flexWrap:"wrap",marginTop:"20px",gap:"10px"},children:e.map(r=>t.jsx(re,{contact:r},r.id))})}const ce=()=>{const e=g(),n=y(T);return t.jsxs("div",{children:[t.jsx("label",{htmlFor:"search",children:"Find contacts by name"}),t.jsx("br",{}),t.jsx("input",{type:"text",id:"search",value:n,onChange:s=>e(W(s.target.value)),style:{width:"250px",padding:"5px",border:"1px solid black"}})]})},le=()=>{const e=g();return A.useEffect(()=>{e(D())},[e]),t.jsxs("div",{children:[t.jsx("h1",{children:"Phonebook"}),t.jsx(se,{}),t.jsx("h2",{children:"Contacts"}),t.jsx(ce,{}),t.jsx(oe,{})]})};export{le as default};
